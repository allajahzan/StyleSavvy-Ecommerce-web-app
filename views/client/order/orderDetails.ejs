<!DOCTYPE html>
<html lang="en">


<!-- molla/cart.html  22 Nov 2019 09:55:06 GMT -->

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Order Details</title>
    <meta name="keywords" content="StyleSavvy">
    <meta name="description" content="StyleSavvy">
    <meta name="author" content="Ahsanallajpk">
    <!-- Favicon -->
    <link rel="shortcut icon" href="/assets/images/demos/demo-5/ss.png">

    <!-- google icons -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />



    <!-- bootstrap -->

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <!-- Plugins CSS File -->
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css">
    <!-- Main CSS File -->
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/myStyle.css">
    <link rel="stylesheet" href="/assets/css/demos/demo-5.css">

</head>

<body onload="loadPage()">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>


    <!-- loading -->
    <!-- <section id="loading">
        <h2 id="footer-logo">StyleSavvy</h2>
        <span class="loader"></span>

    </section> -->

    <div id="snackbar">
        <span id="snackbar_icon" class="material-symbols-outlined">
            task_alt
        </span>
        <p id="snackbar_msg"></p>
    </div>

    <section style="display: block;" id="cart">
        <div class="page-wrapper">

            <header class="header header-5">
                <div class="header-middle sticky-header">
                    <div class="container">
                        <div class="header-left">
                            <button class="mobile-menu-toggler">
                                <span class="sr-only">Toggle mobile menu</span>
                                <i class="icon-bars"></i>
                            </button>

                            <h2 id="logo">StyleSavvy</h2>

                            <nav class="main-nav">
                                <ul class="menu sf-arrows">
                                    <li class="home">
                                        <p class=""><a id="a_menu_item" href="/home">Home</a></p>
                                    </li>
                                    <li class="products">
                                        <p><a id="a_menu_item" href="/shop">Shop</a></p>
                                    </li>

                                    <li class="more" id="more">
                                        <p><a id="a_menu_item" href="/contact">Contact</a></p>
                                    </li>
                                </ul>
                            </nav>
                            
                        </div>

                        <div class="header-right">
                            <div class="header-search header-search-extended header-search-visible">
                                <a href="#" class="search-toggle" role="button"><i class="icon-search"></i></a>
                                <form id="search_form" action="/shop" method="get">
                                    <div class="header-search-wrapper">
                                        <label for="q" class="sr-only">Search</label>
                                        <input type="search" class="form-control" name="search" id="search"
                                            placeholder="Search product" required autocomplete="off">
                                        <button class="btn btn-primary" type="submit"><i
                                                class="icon-search"></i></button>
                                    </div>
                                </form>
    
                            
                            </div>

                            <a id="wishlist_icon" href="/wishlist" class="dropdown cart-dropdown">
                                <i style="font-size: 24px;" class="icon-heart-o"></i>
                                <span id="wishlist_count" class="cart-count"><%= locals.wishlist? locals.wishlist.items.length : 0 %></span> 
                            </a>

                            <a id="cart_icon" href="/cart" class="dropdown cart-dropdown">
                                <i style="font-size: 32px;" class="icon-shopping-cart"></i>
                                <span class="cart-count"><%= locals.cart? locals.cart.items.length : 0 %></span>
                            </a>

                            <% if (locals.user) { %>
                                <% const names=locals.user.name[0].toUpperCase(); %>
                        <ul class="menu">
                            <li class="home">
                                <p class=""><a id="a_menu_item" href="/profile"><%= names %></a></p>
                            </li>
                        </ul>    
                    <% } else { %>
                        <ul class="menu sf-arrows">
                            <li class="home">
                                <p class=""><a id="a_menu_item" href="/signIn">Login</a></p>
                            </li>
                        </ul> 
                    <% } %>
                    
                    

                </div><!-- End .header-right -->
            </div><!-- End .container-fluid -->
        </div><!-- End .header-middle -->
    </header><!-- End .header -->

        <main class="main">
        	
            <nav aria-label="breadcrumb" class="breadcrumb-nav border-0 mb-0">
                <nav aria-label="breadcrumb" class="breadcrumb-nav border-0 mb-0">
                    <div class="container d-flex align-items-center">
                        <ol class="breadcrumb mt-1">
                            <li class="breadcrumb-item"><a style="font-size: 15px; margin-right: 8px;font-weight: 500;" href="home">Home </a>  >  <a style="font-size: 15px; margin-right: 8px; margin-left: 8px;font-weight: 500;" href="/profile"> Profile </a>  >  <a style="font-size: 15px; margin-left: 8px;font-weight: 500;" href="/orders" > Orders</a>  >  <a style="font-size: 15px; margin-left: 8px; color: black;font-weight: 500;" > <%= locals.orders.orderId %></a></li>
                        </ol>
                    </div>
                </nav>
            </nav>

            <div class="page-content">
            	<div class="cart">
     
	                <div class="container">

                        <div class="row">

                            <div class="col-sm-12">

                               <div  id="address_div_order" class="row">

                                <div class="col-sm-12 col-md-8 col-lg-8 col-xl-8">
                                    <h6>Delivery Address</h6>

                                <p style="font-weight: 500; color: black; font-size: 15px;"><%= locals.orders.address.name %></p>

                                <p style="color: black; font-size: 15px; margin: 0px;"><%= locals.orders.address.address %>
                                </p>
                                <p style="color: black; font-size: 15px; margin: 0px">
                                    <%= locals.orders.address.city %>, <%= locals.orders.address.district %>. <%= locals.orders.address.pincode %>
                                </p>
                               
                                <div style="margin-top: 10px;">
                                    <p style="font-weight: 500; color: black; font-size: 15px;">Phone Number</p>
                                <p style="color: black; font-size: 15px;"><%= locals.orders.address.phoneNo %></p>
                                </div>
                                </div>

                                <% if (locals.orders.paymentMethod === 'Online' && locals.orders.paymentStatus === 'Pending') { %>
                                <div id="sts_div_order_details" class="col-sm-12 col-md-4 col-lg-4 col-xl-4">
                                   
                                        <div style="display: block;">
                                           
                                                <div style="display: flex; ">
                                                    <!-- <span style="font-size: 15px; color: orange; margin-right: 10px;" class="material-symbols-outlined bulletAnimeOrange">
                                                        circle
                                                    </span> -->
                                               
                                                    <div style="height: 13.5px; width: 13.5px; background: transparent; border-color: orange; border-radius: 100%; border-width: 2px; border-style: solid; margin-top: 0px; margin-right: .8px; margin-left: 3px;" class="bulletAnimeOrange"></div>
                                                    <h6 style="font-size: 14px; position: relative;left: 10px; top: 0px; margin-bottom: 4px;">Payment is pending</h6>
                                             
                                                    </div>
                                                   <div style="position: relative; left: 2.2px;">
                                                    <p style="font-size: 13px;">Your payment is still pending</p>
    
                                                    <p style="cursor: pointer;" id="sts_p" onclick="payNow('<%= locals.orders._id %>')">Do you wanna pay now ? <span style="margin-top: 5px; text-decoration: underline;">pay</span></p>
                                                   </div>
                                       
                                         
                                        </div>
                                </div>  
                                <% } %>  

                                <div id="sts_div_order_details1" class="col-sm-12 col-md-4 col-lg-4 col-xl-4">

                                        <div style="display: flex; flex-direction: column;">
                                            <div style="display: flex; justify-content: space-between;">
                                                <% let allCancelled = true %>
                                            <% locals.orders.orderedItems.forEach(function(item) { %>
                                                <% if(item.orderStatus !== 'Cancelled' && item.orderStatus !== 'Shipped' && item.orderStatus !== 'Pending') { %>
                                                    <% allCancelled = false %>
                                                <% } %>
                                            <% }); %>
                                            <% if(!allCancelled) { %>
                                                <div style="display: flex;">
                                                    <img style="width: 12%;" src="/assets/images/demos/demo-5/downloadInvoice.png" alt="">
                                                    <p style="margin-left: 10px; font-size: 14px;">Download Invoice</p>
                                                </div>
                                                <button style="width: 30%; padding: 0px; background-color: transparent; border-style: solid; border-color: rgb(231, 231, 231); color:black; font-size: 12px;" id="downloadPdfBtn">Download</button>
                                            <% } %>
                                                  
                                            </div>

                                            <!-- <div style="margin-top: 20px;">
                                                <p style="color: black; font-weight: 500;"><%= locals.orders.paymentMethod %></p>
                                                
                                            </div>
                                         -->
                                           


                                            <table class="table" style="display: none;">
                                                <tbody>
                                                    <% let totalPrice = 0 %>
                                                    <% let c = 0 %>
                                                    <% locals.orders.orderedItems.forEach(function(item) { %>
                                                        <% if(item.orderStatus !== 'Cancelled' &&  item.orderStatus !== 'Shipped' && item.orderStatus !== 'Pending'){ %>
                                                            <tr>
                                                                <td><%= item.product_name %></td>
                                                                <td><%= item.color %></td>
                                                                <td><%= item.size %></td>
                                                                <td><%= item.quantity %></td>
                                                                <td>Rs.<%= item.price %></td>   
                                                                <td><%= item.offer %>%</td>   
                                                                <td>Rs.<%= item.realPrice %></td>                                      
                                                                <td>Rs.<%= item.quantity * item.realPrice %></td>
                                                                <td>Rs.<%= item.discountAmount %></td>           
                                                                <td>Rs.<%= item.totalAmount %> <td>
                                                            </tr>
                                                           
                                                            <% totalPrice = totalPrice + item.totalAmount %>
                                                            <% c++ %>

                                                        <% } %> 
                                                           
                                                    <% }); %>

                                                    <form action="">
                                                        <input type="hidden" id="Totalprice" value="<%= totalPrice %>">
                                                        <input type="hidden" id="TotalItems" value ="<%= c %>" >
                                                    </form>
                                                    <!-- <tr>
                                                        <td>Delivery Charge</td>
                                                        <td>50</td>
                                                        <td>-</td>
                                                        <td>-</td>
                                                        <td>50</td>
                                                    </tr> -->
                                                </tbody>
                                            </table>
                                            

                                            <script>

                                            document.addEventListener('DOMContentLoaded', () => {
                                                document.getElementById('downloadPdfBtn').addEventListener('click', async() => {
                                                  const { jsPDF } = window.jspdf;
                                                  const doc = new jsPDF();

                                                  
                                            
                                                
                                                  const invoiceDetails = {
                                                    sellerInfo: 'StyleSavvy PRIVATE LIMITED,\n5th Floor, Kakncheri,\ Malappuram, Kerala, 673634\nGSTIN: 06AADCG1316B2ZY',
                                                    orderInfo: {
                                                      orderId: `<%= locals.orders.orderId %>`,
                                                      orderDate: formatDate('<%= locals.orders.orderedItems[0].orderedDate %>'),
                                                      invoiceDate: formatDate(Date.now()),
                                                      totalItems: document.getElementById('TotalItems').value
                                                    },

                                                    shipTo: `<%= locals.orders.address.name %>\n<%= locals.orders.address.address %>,\n<%= locals.orders.address.city %>, <%= locals.orders.address.district %>,\n<%= locals.orders.address.pincode %>\nPhone: <%= locals.orders.address.phoneNo %>`,
                                                    totalAmount: document.getElementById('Totalprice').value
                                                  };


                                               
                                                  doc.setFontSize(16);
                                                  doc.text('StyleSavvy', 10, 10);

                                                  doc.setFontSize(12);
                                                  doc.text(invoiceDetails.sellerInfo, 10, 20);
                                                  doc.text(`Order ID: ${invoiceDetails.orderInfo.orderId}`, 10, 50);
                                                  doc.text(`Order Date: ${invoiceDetails.orderInfo.orderDate}`, 10, 55);
                                                  doc.text(`Invoice Date: ${invoiceDetails.orderInfo.invoiceDate}`, 10, 60);
                                                
                                            
                                                  doc.text('Ship To:', 10, 80);
                                                  doc.text(invoiceDetails.shipTo, 10, 90);
                                         
                                                  doc.text(`Total Items: ${invoiceDetails.orderInfo.totalItems}`, 10, 120);
                                            
                                                  // Add the table
                                                  const columns = ["Product", "Color", "Size", "Qty", "Price","Offer","LastPrice","TotalPrice", "Discount", "LastTotal"];
                                                  const table = document.querySelector(".table");
                                                  const tableData = Array.from(table.querySelectorAll('tbody tr')).map(row => {
                                                    return Array.from(row.querySelectorAll('td')).map(cell => cell.innerText.trim());
                                                  });

                                                  doc.autoTable({
                                                    startY: 130,
                                                    head: [columns],
                                                    body: tableData,
                                                    styles: { fontSize: 10 },
                                                    headStyles: { fillColor: [255, 255, 255], textColor: [0, 0, 0], halign: 'left' }, // Aligning headers to the left
                                                    alternateRowStyles: { fillColor: [240, 240, 240] }
                                                   });

                                            
                                                  // Add total amount
                                                  doc.text(`Grand Total: Rs ${invoiceDetails.totalAmount}`, 155, doc.autoTable.previous.finalY + 20);
                                            
                                                  // Save the PDF
                                                  doc.save(`<%= locals.orders.orderId %>.pdf`);
                                                });

                                                


                                                function formatDate(dateString) {
                                                    const date = new Date(dateString);
                                                    const options = { day: 'numeric', month: 'long', year: 'numeric' };
                                                    return date.toLocaleDateString('en-GB', options);
                                                }
                                            });
                                                
                                            
                                            
                                              </script>

                                        </div>
                                </div>

                               </div>

                            </div>
                            

                        </div>

	                	<div class="row">

	                	<div id="cart_whole_items_div" class="col-lg-12">
	                		                
                             
                                <% locals.orders.orderedItems.forEach((item, index)=>{ %>
                                    <div id="cart_whole_items_div">
                                        <div class="row order_items">
                                  
                                    <div class="col-2 col-sm-1 col-md-1 img-div">
                                        <img width="100px" src="/products/uploads/<%= item.image %>" alt="">                                                         
                                    </div>
        
                                    <div class="col-10 col-sm-6 col-md-6 name-div">
                                
        
                                    <p style="font-weight: 500; color: black;">
                                       <%= item.product_name %>
                                    </p>
                                    <p style="font-size: 14px; margin-bottom: 0px;" class="category">
                                      <%= item.type %> > <%= item.category %> > <%= item.color %> > <span style="color: #bf8040;"><%= item.size %></span>
                                    </p>
        
                                    <% const discountForOne = item.discountAmount / item.quantity; %>

                                    <h5>â‚¹ <%= item.realPrice - Math.round(discountForOne) %> (<%= item.quantity %>)</h5>
                                                                                                 
                                    </div>
                                    <div class="col-12 col-sm-5 col-md-5">
                                        <div class="row d-flex justify-content-center align-items-center">
                                            <div id="<%= index %>" class="tracker mt-2">
                                                <% if(locals.orders.paymentMethod !== 'Online'){ %>
                                               
                                                    <div id="progress<%= index %>" class="progress"></div>
                                                    <div class="progress1"></div>
                                                    <input type="hidden" id="orderStatus<%= index %>" class="orderStatus" value="<%= item.orderStatus === 'Pending' ? 'Confirmed' : item.orderStatus %>">
                                                        
                                                <% }else{ %>

                                                    <% if(item.paymentStatus === 'Pending' && item.orderStatus === 'Pending'){ %>

                                                       <div id="progress<%= index %>" class="progress"></div>
                                                       <div class="progress1"></div>
                                                       <input type="hidden" id="orderStatus<%= index %>" class="orderStatus" value="Pending">
                                                   
                                                    <% }else{ %>
                                                      
                                                       <div id="progress<%= index %>" class="progress"></div>
                                                       <div class="progress1"></div>
                                                       <input type="hidden" id="orderStatus<%= index %>" class="orderStatus" value="<%= item.orderStatus === 'Pending' ? 'Confirmed' : item.orderStatus %>">
                                                    <% } %>       

                                                <% } %>

                                                <!-- 1st dot -->
                                                <% if(item.orderStatus === 'Returned'){ %>
                                                    <div class="step step<%= index %>">
                                                        <p style="color: orange; font-size: 12px; font-weight: 500;" class="text2">Return</p>
                                                        <div class="bullet"><p class="p_text">1</p></div>
                                                        <p style="color: grey; font-size: 12px; font-weight: 500;" class="text">
                                                            <% if ((locals.orders.paymentMethod === 'COD') || (locals.orders.paymentMethod === 'Online') || (locals.orders.paymentMethod === 'Wallet')) { %>
                                                                <%= formatDate(item.requestedDate) %>
                                                            <% } %>
                                                        </p>
                                                        
                                                    </div> 
                                                <% }else if(item.orderStatus === 'RequestedReturn'){ %>
                                                    <div class="step step<%= index %>">
                                                        <p style="color: orange; font-size: 12px; font-weight: 500;" class="text2">Return</p>
                                                        <div class="bullet bulletAnimeOrange"><p class="p_text">1</p></div>
                                                        <p style="color: grey; font-size: 12px; font-weight: 500;" class="text">
                                                            <% if ((locals.orders.paymentMethod === 'COD') || (locals.orders.paymentMethod === 'Online') || (locals.orders.paymentMethod === 'Wallet')) { %>
                                                                <%= formatDate(item.requestedDate) %>
                                                            <% } %>
                                                        </p>
                                                        
                                                    </div>
                                                <%}else if(item.orderStatus === 'RequestAccepted'){ %>
                                                        <div class="step step<%= index %>">
                                                            <p style="color: orange; font-size: 12px; font-weight: 500;" class="text2">Return</p>
                                                            <div class="bullet"><p class="p_text">1</p></div>
                                                            <p style="color: grey; font-size: 12px; font-weight: 500;" class="text">
                                                                <% if ((locals.orders.paymentMethod === 'COD') || (locals.orders.paymentMethod === 'Online') || (locals.orders.paymentMethod === 'Wallet')) { %>
                                                                    <%= formatDate(item.requestedDate) %>
                                                                <% } %>
                                                            </p>
                                                        </div> 
                                                <%}else if(item.orderStatus === 'RequestRejected'){ %>
                                                        <div class="step step<%= index %>">
                                                            <p style="color: orange; font-size: 12px; font-weight: 500;" class="text2">Return</p>
                                                            <div class="bullet"><p class="p_text">1</p></div>
                                                            <p style="color: grey; font-size: 12px; font-weight: 500;" class="text">
                                                                <% if ((locals.orders.paymentMethod === 'COD') || (locals.orders.paymentMethod === 'Online') || (locals.orders.paymentMethod === 'Wallet')) { %>
                                                                    <%= formatDate(item.requestedDate) %>
                                                                <% } %>
                                                            </p>
                                                        </div>            
                                                <% }else if(item.orderStatus === 'Cancelled'){ %>
                                                    <div class="step step<%= index %>">
                                                        <p style="color: green; font-size: 12px; font-weight: 500;" class="text2">Confirmed</p>
                                                        <div class="bullet"><p class="p_text">1</p></div>
                                                        <p style="color: grey; font-size: 12px; font-weight: 500;" class="text">
                                                            <% if ((locals.orders.paymentMethod === 'COD') || (locals.orders.paymentMethod === 'Online') || (locals.orders.paymentMethod === 'Wallet')) { %>
                                                                <%= formatDate(item.orderedDate) %>
                                                            <% } %>
                                                        </p>
                                                        
                                                    </div>  
                                                <% } else if(item.orderStatus === 'Shipped'){%>
                                                    <div class="step step<%= index %>">
                                                        <p style="color: green; font-size: 12px; font-weight: 500;" class="text2">Confirmed</p>
                                                        <div class="bullet "><p class="p_text">1</p></div>
                                                        <p style="color: grey; font-size: 12px; font-weight: 500;" class="text">
                                                            <% if ((locals.orders.paymentMethod === 'COD') || (locals.orders.paymentMethod === 'Online' && item.paymentStatus !== 'Pending') || (locals.orders.paymentMethod === 'Wallet')) { %>
                                                                <%= formatDate(item.orderedDate) %>
                                                            <% } %>
                                                        </p>
                                                        
                                                    </div>
                                                <% } else if(item.orderStatus === 'Delivered'){%>
                                                    <div class="step step<%= index %>">
                                                        <p style="color: green; font-size: 12px; font-weight: 500;" class="text2">Confirmed</p>
                                                        <div class="bullet"><p class="p_text">1</p></div>
                                                        <p style="color: grey; font-size: 12px; font-weight: 500;" class="text">
                                                            <% if ((locals.orders.paymentMethod === 'COD') || (locals.orders.paymentMethod === 'Online' && item.paymentStatus !== 'Pending') || (locals.orders.paymentMethod === 'Wallet')) { %>
                                                                <%= formatDate(item.orderedDate) %>
                                                            <% } %>
                                                        </p>
                                                            
                                                    </div>
                                                <% } else {%>

                                                    <% if(locals.orders.paymentMethod !== 'Online'){ %>
                                               
                                                        <div class="step step<%= index %>">
                                                            <p style="color: green; font-size: 12px; font-weight: 500;" class="text2">Confirmed</p>
                                                            <div class="bullet bulletAnimeGreen"><p class="p_text">1</p></div>
                                                            <p style="color: grey; font-size: 12px; font-weight: 500;" class="text">
                                                                <% if ((locals.orders.paymentMethod === 'COD') || (locals.orders.paymentMethod === 'Online' && item.paymentStatus !== 'Pending') || (locals.orders.paymentMethod === 'Wallet')) { %>
                                                                    <%= formatDate(item.orderedDate) %>
                                                                <% } %>
                                                            </p>
                                                                
                                                        </div>
                                                            
                                                    <% }else{ %>
    
                                                        <% if(item.paymentStatus === 'Pending'){ %>
    
                                                            <div class="step step<%= index %>">
                                                                <p style="color: lightgray; font-size: 12px; font-weight: 500;" class="text2">Confirmed</p>
                                                                <div class="bullet"><p class="p_text">1</p></div>
                                                                <p style="color: grey; font-size: 12px; font-weight: 500;" class="text">
                                                                    <% if ((locals.orders.paymentMethod === 'COD') || (locals.orders.paymentMethod === 'Online' && item.paymentStatus !== 'Pending') || (locals.orders.paymentMethod === 'Wallet')) { %>
                                                                        <%= formatDate(item.orderedDate) %>
                                                                    <% } %>
                                                                </p>
                                                                    
                                                            </div>
                                                       
                                                        <% }else{ %>
                                                         
                                                            <div class="step step<%= index %>">
                                                                <p style="color: green; font-size: 12px; font-weight: 500;" class="text2">Confirmed</p>
                                                                <div class="bullet bulletAnimeGreen"><p class="p_text">1</p></div>
                                                                <p style="color: grey; font-size: 12px; font-weight: 500;" class="text">
                                                                    <% if ((locals.orders.paymentMethod === 'COD') || (locals.orders.paymentMethod === 'Online' && item.paymentStatus !== 'Pending') || (locals.orders.paymentMethod === 'Wallet')) { %>
                                                                        <%= formatDate(item.orderedDate) %>
                                                                    <% } %>
                                                                </p>
                                                                    
                                                            </div>
                                                         
                                                        <% } %>       
    
                                                    <% } %>
                                                <% } %>


                                                <!-- 2nd dot -->
                                                <% if(item.orderStatus === 'Cancelled'){%>
                                                    <div class="step step<%= index %>">
                                                     
                                                        <div class="bullet"><p class="p_text">2</p></div>
                                                      
                                                    </div>
                                                <% }else if(item.orderStatus === 'Shipped') { %>
                                                    <div class="step step<%= index %>">
                                                        <p id="text<%= index %>" style="color: green; font-size: 12px; font-weight: 500;" class="text2">Shipped</p>
                                                        <div class="bullet bulletAnimeGreen"><p class="p_text">2</p></div>
                                                        <p style="color: grey; font-size: 12px; font-weight: 500;" class="text">
                                                            <% if (item.shippedDate) { %>
                                                                <%= formatDate(item.shippedDate) %>
                                                            <% } %>
                                                        </p>
                                                    </div> 
                                                <% }else if(item.orderStatus === 'Delivered') { %>
                                                    <div class="step step<%= index %>">
                                                        <p id="text<%= index %>" style="color: green; font-size: 12px; font-weight: 500;" class="text2">Shipped</p>
                                                        <div class="bullet"><p class="p_text">2</p></div>
                                                        <p style="color: grey; font-size: 12px; font-weight: 500;" class="text">
                                                            <% if (item.shippedDate) { %>
                                                                    <%= formatDate(item.shippedDate) %>
                                                            <% } %>
                                                        </p>
                                                </div>       
                                                <% } else if(item.orderStatus === 'Returned'){ %>
                                                    <div class="step step<%= index %>">
                                                        <p id="text<%= index %>" style="color: orange; font-size: 12px; font-weight: 500;" class="text2">Approved</p>
                                                        <div class="bullet"><p class="p_text">2</p></div>
                                                        <p style="color: grey; font-size: 12px; font-weight: 500;" class="text">
                                                            <% if (item.requestAcceptedDate) { %>
                                                                <%= formatDate(item.requestAcceptedDate) %>
                                                            <% } %>
                                                        </p>
                                                    </div> 
                                                <% } else if(item.orderStatus === 'RequestedReturn'){ %>
                                                    <div class="step step<%= index %>">
                                                        <p id="text<%= index %>" style="color: lightgray; font-size: 12px; font-weight: 500;" class="text2">Approved</p>
                                                        <div class="bullet"><p class="p_text">2</p></div>
                                                        <p style="color: grey; font-size: 12px; font-weight: 500;" class="text">
                                                            <% if (item.requestAcceptedDate) { %>
                                                                <%= formatDate(item.requestAcceptedDate) %>
                                                            <% } %>
                                                        </p>
                                                    </div> 
                                                <%}else if(item.orderStatus === 'RequestAccepted'){ %>
                                                    <div class="step step<%= index %>">
                                                        <p id="text<%= index %>" style="color: orange; font-size: 12px; font-weight: 500;" class="text2">Approved</p>
                                                        <div class="bullet bulletAnimeOrange"><p class="p_text">2</p></div>
                                                        <p style="color: grey; font-size: 12px; font-weight: 500;" class="text">
                                                            <% if (item.requestAcceptedDate) { %>
                                                                <%= formatDate(item.requestAcceptedDate) %>
                                                            <% } %>
                                                        </p>
                                                    </div> 
                                                <%}else if(item.orderStatus === 'RequestRejected'){ %>
                                                    <div class="step step<%= index %>">
                                                            
                                                        <div class="bullet"><p class="p_text">2</p></div>
    
                                                    </div> 
                                                <% }else { %>
                                                    <div class="step step<%= index %>">
                                                        <p id="text<%= index %>" style="color: lightgray; font-size: 12px; font-weight: 500;" class="text2">Shipped</p>
                                                        <div class="bullet"><p class="p_text">2</p></div>
                                                        <p style="color: grey; font-size: 12px; font-weight: 500;" class="text">
                                                            <% if (item.shippedDate) { %>
                                                                <%= formatDate(item.shippedDate) %>
                                                            <% } %>
                                                        </p>
                                                    </div>
                                                <% } %> 

                                                <!-- 3rd dot -->
                                                <% if(item.orderStatus === 'Cancelled'){%>
                                                    <div class="step step<%= index %>">
                                                        <p style="color: black; font-size: 12px; font-weight: 500; color: red;" class="text2">Cancelled</p>
                                                        <div class="bullet"><p class="p_text">2</p></div>
                                                        <p style="color: black; font-size: 12px; font-weight: 500;" class="text status" data-status="">
                                                            <% if (item.cancelledDate) { %>
                                                                <%= formatDate(item.cancelledDate) %>
                                                            <% } %>
                                                        </p>
                                                    </div>
                                                <% }else if(item.orderStatus === 'Delivered') { %>
                                                    <div class="step step<%= index %>">
                                                        <p id="text<%= index %>" style="color: green; font-size: 12px; font-weight: 500;" class="text2">Delivered</p>
                                                        <div class="bullet"><p class="p_text">3</p></div>
                                                        <p style="color: black; font-size: 12px; font-weight: 500;" class="text">
                                                            <% if (item.deliveredDate) { %>
                                                                <%= formatDate(item.deliveredDate) %>
                                                            <% } %>
                                                        </p>
                                                    </div>    
                                                <% } else if(item.orderStatus === 'Returned'){ %>
                                                    <div class="step step<%= index %>">
                                                        <p style="color: orange; font-size: 12px; font-weight: 500;" class="text2">Returned</p>
                                                        <div class="bullet"><p class="p_text">3</p></div>
                                                        <p style="color: black; font-size: 12px; font-weight: 500;" class="text status" data-status="">
                                                            <% if (item.returnedDate) { %>
                                                                <%= formatDate(item.returnedDate) %>
                                                            <% } %>
                                                        </p>
                                                    </div>
                                                <% } else if(item.orderStatus === 'RequestedReturn'){ %>
                                                        <div class="step step<%= index %>">
                                                            <p style="color: lightgray; font-size: 12px; font-weight: 500;" class="text2">Returned</p>
                                                            <div class="bullet"><p class="p_text">3</p></div>
                                                            
                                                        </div>
                                                <% } else if(item.orderStatus === 'RequestAccepted'){ %>
                                                        <div class="step step<%= index %>">
                                                            <p style="color: lightgray; font-size: 12px; font-weight: 500;" class="text2">Returned</p>
                                                            <div class="bullet"><p class="p_text">3</p></div>
                                                            <p style="color: black; font-size: 12px; font-weight: 500;" class="text status" data-status="">
                                                                <% if (item.returnedDate) { %>
                                                                    <%= formatDate(item.returnedDate) %>
                                                                <% } %>
                                                            </p>
                                                        </div> 
                                                <% } else if(item.orderStatus === 'RequestRejected'){ %>
                                                        <div class="step step<%= index %>">
                                                            <p style="color: red; font-size: 12px; font-weight: 500;" class="text2">Return Rejected</p>
                                                            <div class="bullet"><p class="p_text">2</p></div>
                                                            <p style="color: black; font-size: 12px; font-weight: 500;" class="text status" data-status="">
                                                                <% if (item.requestRejectedDate) { %>
                                                                        <%= formatDate(item.requestRejectedDate) %>
                                                                <% } %>
                                                            </p>
                                                        </div>                
                                                <% }else { %>
                                                    <div class="step step<%= index %>">
                                                        <p style="color: lightgray; font-size: 12px; font-weight: 500;" class="text2">Delivered</p>
                                                        <div class="bullet"><p class="p_text">3</p></div>
                                                        <p style="color: black; font-size: 12px; font-weight: 500;" class="text status" data-status="">
                                                            <% if (item.deliveredDate) { %>
                                                                <%= formatDate(item.deliveredDate) %>
                                                            <% } %>
                                                        </p>
                                                    </div>
                                                <% } %>           
                                            </div>
                                        </div>
                                    </div>

                                    <% function formatDate(dateString) {
                                        const date = new Date(dateString);
                                        const options = { day: 'numeric', month: 'long', year: 'numeric' };
                                        return date.toLocaleDateString('en-GB', options);
                                    } %>

                        </div>
                    </div>

                    <% }) %>


                        <script>
                            document.addEventListener('DOMContentLoaded', function () {
                                const orderStatusElements = document.querySelectorAll('.orderStatus');
    
                                orderStatusElements.forEach((element, index) => {
                                    const status = element.value;
                                    updateOrderStatus(status, index);
                                });
                            });

                            function updateOrderStatus(status, index) {
                                const steps = document.querySelectorAll(' .step'+index);
                                const progress = document.getElementById('progress'+index);


                                steps.forEach(step => step.classList.remove('active'));
                                steps.forEach(step => step.classList.remove('inactive'));
                                steps.forEach(step => step.classList.remove('hide'));
                                progress.classList.remove('red');

                                switch (status) {
                                    case 'Pending':
                                        // steps[0].classList.add('active');
                                        progress.style.width = '97%';
                                        progress.style.backgroundColor = 'lightgrey'
                                        break;
                                    case 'Confirmed':
                                        steps[0].classList.add('active');
                                        progress.style.width = '33.3333%';
                                        break;
                                    case 'Shipped':
                                        steps[0].classList.add('active');
                                        steps[1].classList.add('active');
                                        progress.style.width = '66.6666%';
                                        break;
                                    case 'Delivered':
                                        steps.forEach(step => step.classList.add('active'));
                                        progress.style.width = '97%';
                                        break;
                                    case 'Cancelled':
                                        steps[0].classList.add('active');
                                        steps[1].classList.add('hide');
                                        steps[2].classList.add('inactive');
                                        // progress.style.backgroundColor = 'rgb(240, 58, 58)'
                                        progress.style.width = '97%';
                                        break;
                                    case 'RequestedReturn':
                                        steps[0].classList.add('return');
                                        progress.style.width = '33.3333%';
                                        progress.style.backgroundColor = 'orange'
                                        break;
                                    case 'RequestAccepted':
                                        steps[0].classList.add('return');
                                        steps[1].classList.add('return');
                                        progress.style.width = '66.6666%';
                                        progress.style.backgroundColor = 'orange'
                                        break;  
                                    case 'RequestRejected':
                                        steps[0].classList.add('return');
                                        steps[1].classList.add('hide');
                                        steps[2].classList.add('inactive');
                                        progress.style.width = '97%';
                                        progress.style.backgroundColor = 'orange'
                                        break;  
                                    case 'Returned':
                                        steps[0].classList.add('return');
                                        steps[1].classList.add('return');
                                        steps[2].classList.add('return');
                                        progress.style.backgroundColor = 'orange'
                                        progress.style.width = '97%';
                                        break;    
                                    default:
                                        progress.style.width = '0%';
                                }
                            }

                            
                        </script>
                  
                </div><!-- End .col-lg-9 -->


        </div><!-- End .row -->
        </div><!-- End .container -->


        </div><!-- End .cart -->
        </div><!-- End .page-content -->
        </main><!-- End .main -->

        <footer class="footer">
            <div class="footer-middle">
                <div class="container">
                    <div class="row">
                        <div class="col-sm-6 col-lg-3">
                            <div class="widget widget-about">
                                <h2 id="footer-logo">StyleSavvy</h2>
                                <p>Discover the latest trends and timeless classics in fashion. Shop with us for quality clothing that fits your style and budget. Thank you for choosing us!.</p>

                                <div class="social-icons">
                                    <a href="https://www.youtube.com/channel/UCm0ea9vsyhG6mMJZr99HNCg" class="social-icon" title="Facebook" target="_blank"><i class="icon-youtube"></i></a>
                                    <!-- <a href="#" class="social-icon" title="Twitter" target="_blank"><i class="icon-twitter"></i></a> -->
                                    <a href="https://www.instagram.com/allajahzan/" class="social-icon" title="Instagram" target="_blank"><i class="icon-instagram"></i></a>
                                    <a href="https://in.pinterest.com/ahsanallaj/" class="social-icon" title="Pinterest" target="_blank"><i class="icon-pinterest"></i></a>
                                </div><!-- End .soial-icons -->
                            </div><!-- End .widget about-widget -->
                        </div><!-- End .col-sm-6 col-lg-3 -->

                        <div class="col-sm-6 col-lg-3">
                            <div class="widget">
                                <h4 class="widget-title">Useful Links</h4><!-- End .widget-title -->

                                <ul class="widget-list">
                                    <li><a>About Molla</a></li>
                                    <li><a>How to shop on StyleSavvy</a></li>
                                    <li><a>FAQ</a></li>
                                    <li><a>Contact us</a></li>
                                    <li><a>Log in</a></li>
                                </ul><!-- End .widget-list -->
                            </div><!-- End .widget -->
                        </div><!-- End .col-sm-6 col-lg-3 -->

                        <div class="col-sm-6 col-lg-3">
                            <div class="widget">
                                <h4 class="widget-title">Customer Service</h4><!-- End .widget-title -->

                                <ul class="widget-list">
                                    <li><a >Payment Methods</a></li>
                                    <li><a >Money-back guarantee!</a></li>
                                    <li><a >Returns</a></li>
                                    <li><a >Shipping</a></li>
                                    <li><a >Terms and conditions</a></li>
                                    <li><a >Privacy Policy</a></li>
                                </ul><!-- End .widget-list -->
                            </div><!-- End .widget -->
                        </div><!-- End .col-sm-6 col-lg-3 -->

                        <div class="col-sm-6 col-lg-3">
                            <div class="widget">
                                <h4 class="widget-title">My Account</h4><!-- End .widget-title -->

                                <ul class="widget-list">
                                    <li><a href="/signIn">Sign In</a></li>
                                    <li><a href="/cart">View Cart</a></li>
                                    <li><a href="/wishlist">My Wishlist</a></li>
                                    <li><a href="/orders">Track My Order</a></li>
                                    <li><a href="/contact">Help</a></li>
                                </ul><!-- End .widget-list -->
                            </div><!-- End .widget -->
                        </div><!-- End .col-sm-6 col-lg-3 -->
                    </div><!-- End .row -->
                </div><!-- End .container -->
            </div><!-- End .footer-middle -->

            <div class="footer-bottom">
                <div class="container">
                    <p class="footer-copyright">Copyright Â© 2024 StyleSavvy. All Rights Reserved.</p>
                    <!-- End .footer-copyright -->
                    <figure class="footer-payments">
                        <img src="/assets/images/payments.png" alt="Payment methods" width="272"
                            height="20">
                    </figure><!-- End .footer-payments -->
                </div><!-- End .container -->
            </div><!-- End .footer-bottom -->
        </footer><!-- End .footer -->
        </div><!-- End .page-wrapper -->
        <button id="scroll-top" title="Back to Top"><i class="icon-arrow-up"></i></button>

        <!-- Mobile Menu -->
        <div class="mobile-menu-overlay"></div><!-- End .mobil-menu-overlay -->

        <div class="mobile-menu-container mobile-menu-dark">
            <div class="mobile-menu-wrapper">
                <span class="mobile-menu-close"><i class="icon-close"></i></span>

                <form id="search_form1" method="get" class="mobile-search">
                    <label for="mobile-search" class="sr-only">Search</label>
                    <input type="search"  class="form-control" name="mobile-search" id="search1" autocomplete="off" placeholder="Search in..." required>
                    <button class="btn btn-primary" type="submit"><i class="icon-search"></i></button>
                </form>

                <script>
                    const form1 = document.getElementById('search_form1')
                    form1.addEventListener('submit', (e)=>{
                         e.preventDefault()
    
                        const data = document.getElementById('search1').value
    
                        let url = new URL(window.location.href);
                        url.pathname = '/shop';
                        url.searchParams.set('search', data);
                        window.location.href = url.toString();
                    })                                        
               </script>
                
                <nav class="mobile-nav">
                    <ul class="mobile-menu">
                        <li>
                            <a href="/home">Home</a>
                        </li>
                        <li>
                            <a href="/shop">Shop</a>
    
                        </li>
    
                        <li>
                            <a href="/contact">Contact</a>
    
                        </li>
                        <li>
                            <a href="/wishlist">Wishlist</a>
                        </li>
                        <li>
                            <a href="/cart">Cart</a>
                        </li>
                        <li class="active">
                            <a href="/profile">Profile</a>
                        </li>
                    </ul>
                </nav>

                <div class="social-icons">
                    <a href="https://www.youtube.com/channel/UCm0ea9vsyhG6mMJZr99HNCg" class="social-icon" title="Facebook" target="_blank"><i class="icon-youtube"></i></a>
                    <!-- <a href="#" class="social-icon" title="Twitter" target="_blank"><i class="icon-twitter"></i></a> -->
                    <a href="https://www.instagram.com/allajahzan/" class="social-icon" title="Instagram" target="_blank"><i class="icon-instagram"></i></a>
                    <a href="https://in.pinterest.com/ahsanallaj/" class="social-icon" title="Pinterest" target="_blank"><i class="icon-pinterest"></i></a>
                </div><!-- End .social-icons -->
            </div><!-- End .mobile-menu-wrapper -->
        </div><!-- End .mobile-menu-container -->
    </section>

    <div class="modal fade" id="outofstock" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-md">
          <div class="modal-content">
            <!-- <h1>Ordered Products</h1> -->
            <div id="show_unavailable_p" class="modal-body">
                <div class="row">
                    <div class="col-2 col-sm-2 col-md-2 img-div">
                        <img id="product_img" alt="">
                    </div>
                    <div class="col-9 col-sm-9 col-md-9 name-div">
                        <div class="row">
                            <div class="col">
                                <h6 id="product_name"></h6>
                                <p id="category_of_p"></p>
                                <p style="color: black; font-weight: 500; font-size: 16px;" id="show_label_p"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- <div class="footer_" style="display: flex;" >
              <button type="button" id="close_btn_unavailable" onclick="cancelCheckOut()" class="btn" data-bs-dismiss="modal">Close</button>
              <button type="button" id="understood_btn_unavailable" onclick="continueCheckOut()"  class="btn">Order</button>
            </div> -->
            <div class="modal-footer"> <!-- Added justify-content-center class to center align buttons -->
                <button id="close_btn_unavailable" class="close_btn" onclick="cancelModal()" data-bs-dismiss="modal">Close</button>
                <button disabled style="cursor: none;" id="understood_btn_unavailable" class="button2">Continue</button>
            </div>
          </div>
        </div>
      </div>

      <div class="modal fade" id="add_money" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="unlistCategoryLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-md">
            <!-- <img id="img_cart" src="/assets/images/demos/demo-5/cart-unscreen.gif" alt="" style="position: absolute; top: 10em; left: 50%; transform: translateX(-120%); z-index: 9999; width: 45%;"> -->
            <div class="modal-content">
                <div class="modal-body text-center"> <!-- Added text-center class to center align text -->
                    <h6>Are you sure that you want to order these item(s)?</h6>
                </div>
                <div class="modal-footer justify-content-center"> <!-- Added justify-content-center class to center align buttons -->
                    <button class="close_btn" onclick="dontOrder()" data-bs-dismiss="modal">No</button>
                    <button onclick="orderNow()" id="ordernow_button" class="button2">Yes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Plugins JS File -->
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script src="/assets/js/api/orderDetails.js"></script>
    <script src="/assets/js/jquery.min.js"></script>
    <script src="/assets/js/bootstrap.bundle.min.js"></script>
    <script src="/assets/js/jquery.hoverIntent.min.js"></script>
    <script src="/assets/js/jquery.waypoints.min.js"></script>
    <script src="/assets/js/superfish.min.js"></script>
    <script src="/assets/js/owl.carousel.min.js"></script>
    <script src="/assets/js/bootstrap-input-spinner.js"></script>
    <!-- Main JS File -->
    <script src="/assets/js/main.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
</body>


<!-- molla/cart.html  22 Nov 2019 09:55:06 GMT -->

</html>